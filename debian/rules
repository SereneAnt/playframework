#!/usr/bin/make -f
# -*- makefile -*-

# Uncomment this to turn on verbose mode.
export DH_VERBOSE=1

export JAVA_HOME=/usr/lib/jvm/default-java

#requires sbt be configured storing cache in the same location
export IVY_HOME=/var/cache/.ivy2

%:
	dh $@

get-orig-source:
	uscan --download-current-version --force-download --no-symlink --repack --compression xz

override_dh_auto_build:
	dh_auto_build
	cd framework
	#java -Dsbt.ivy.home=target/.ivy2 -Divy.home=target/.ivy2 -jar ${SBT_HOME}/bin/sbt-launch.jar update
	sbt update

override_dh_auto_clean:
	dh_auto_clean
	rm -rf ${IVY_HOME}

override_dh_install:
	dh_install
	mkdir -p debian/playframework/var/cache/.ivy2
	cp -r ${IVY_HOME} debian/playframework${IVY_HOME}